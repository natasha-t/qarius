//Helper functions to handle API data, post sorting

// var tumblr = require('tumblr.js');
// var client = tumblr.createClient({
//   consumer_key: 'Oh8fppC7uDzKENpreatfnJtwhmAqKXA1o5jZqdT5v1EfDf5nQz',
//   consumer_secret: 'z48ygByyfRQnOcg4YMcZlHQV7znh6dxe6joJ8miAJOJ00fKYvE',
//   token: '',
//   token_secret: ''
// });

module.exports = {

  //getPosts should return an array of post objects to be passed to the view

   getPosts: function(client, blogName) {
    return new Promise(function(resolve, reject) {
      client.blogLikes(blogName, function(err, data){
        var jsonString = JSON.stringify(data);
        var obj = JSON.parse(jsonString);
        var likedPosts = obj.liked_posts;
        var allPosts = [];
        for (var i = 0; i < likedPosts.length; i++){
          var post = {};
          post['blogName'] = likedPosts[i].blog_name;
          post['type'] = likedPosts[i].type;

          allPosts.push(post);
        }
        console.log(allPosts); // the misleading console.log statement
        resolve(allPosts);
      });
    });
  },
};



